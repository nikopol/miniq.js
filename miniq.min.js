// miniq.js 0.1 - niko 2013
var $=function(){var e,n=0,k=window,h=k.document;k.miniq=function(a){var b=[];if(void 0!=a){"function"==typeof a?e.ready(a):"object"==typeof a?"length"in a?b=[].slice.call(a):b.push(a):"string"==typeof a&&(/^<.+>$/.test(a)?(b=h.createElement("div"),b.innerHTML=a,a=b.childNodes):a=h.querySelectorAll(a),b=[].slice.call(a));for(a=0;a<b.length;this[a]=b[a++]);}this.length=b.length;this.list=b;return this};e=function(a){return new miniq(a)};e.ready=function(a){/complete|loaded|interactive/.test(h.readyState)?a():h.addEventListener("DOMContentLoaded",function(){a()});return e};e.error=function(a){console.error(a)};e.extend=function(a){var b=[].slice.call(arguments,1),d,c;if(void 0==a||"object"!=typeof a)a={};for(;d=b.shift();)for(c in d)a[c]=!(c in a)||"object"!=typeof d[c]?d[c]:e.extend(a[c],d[c]);return a};e.ajax=function(a,b){"string"==typeof a&&(a={url:a,ok:b});var d=a.type||"GET",c=a.url||"",p=a.contenttype||"application/x-www-form-urlencoded",r=a.datatype||"application/json",f=a.jsonp||new k.XMLHttpRequest,
l=a.error||e.error,q=a.success||function(){},m,g,j;if(a.data){if("string"==typeof a.data)g=a.data;else if(/json/.test(p))g=JSON.stringify(a.data);else{g=[];for(j in a.data)g.push(encodeURIComponent(j)+"="+encodeURIComponent(a.data[j]));g=g.join("&")}if(/GET|DEL/i.test(d)||a.jsonp)c+=/\?/.test(c)?"&"+g:"?"+g,g=""}if(a.jsonp)n&&e("#jsonp"+(h-1)).remove(),g=h.createElement("script"),j="jsonp"+n++,k[j]=q,g.onerror=l,g.src=/=\?/.test(c)?c.replace(/=\?/,"="+j):/\?/.test(c)?c+"&callback="+j:c+"?callback="+
j,e("head").append(g);else{f.onreadystatechange=function(){if(4==f.readyState)if(m&&clearTimeout(m),/^2/.test(f.status)){g=f.responseText;if(/json/.test(r))try{g=JSON.parse(f.responseText)}catch(b){return a.error("json parse error: "+b.message,f)}q(g,f)}else l(f.responseText,f)};f.open(d,c,!0);f.setRequestHeader("Content-Type",p);if(a.headers)for(j in a.headers)f.setRequestHeader(j,a.headers[j]);a.timeout&&(m=setTimeout(function(){f.onreadystatechange=function(){};f.abort();l("timeout",f)},1E3*a.timeout));
f.send(g)}return f};k.miniq.prototype={ready:e.ready,ajax:e.ajax,each:function(a){var b=this;b.list.forEach(function(d){a.call(b,d)});return b},append:function(a){return this.each(function(b){e(a).each(function(a){b.appendChild(a)})})},to:function(a){return e(a).append(this.list)},remove:function(){return this.each(function(a){e(s).list.forEach(function(){a.parent.removeChild(a)})})},html:function(a){return void 0==a?this.length?this[0].innerHTML:null:this.each(function(b){b.innerHTML=a})},val:function(a){return void 0==
a?this.length&&"value"in this[0]?this[0].value:null:this.each(function(b){"value"in b&&(b.value=a)})},attr:function(a){if("string"==typeof a)return this.length?this[0].getAttribute(a):null;for(var b in a)this.each(function(d){d.setAttribute(b,a[b])});return this},check:function(a){return void 0==a?this.list.filter(function(a){return a.checked}).length:this.each(function(b){"checked"in b&&(b.checked=a)})},cls:function(a){if(void 0==a)return this.length?this[0].className:null;var b,d,c,e=/([\+\-\*])([^\+\-\*\s]+)/g;
if(/^[\+\-\*]/.test(a))for(;null!==(b=e.exec(a));)d=b[1],c=b[2],this.each(function(a){var b=a.className.split(/\s+/).filter(function(a){return a});"-"!=d&&-1==b.indexOf(c)?b.push(c):"+"!=d&&(b=b.filter(function(a){return a!=c}));a.className=b.join(" ")});else this.each(function(b){b.className=a});return this},css:function(a,b){if(void 0==a)return this.length?this[0].style:null;if("object"==typeof a)this.each(function(b){for(var c in a)b.style[c]=a[c]});else if("string"==typeof a){if(void 0==b)return this.length?
this[0].style[a]:null;this.each(function(d){d.style[a]=b})}return this},show:function(){return this.css({display:null})},hide:function(){return this.css({display:"none"})},pos:function(a){a=a||0;return a in this?(a=(this[a]===h?h.body:this[a]).getBoundingClientRect(),{left:a.left+k.pageXOffset,top:a.top+k.pageYOffset,width:a.width,height:a.height}):null},bind:function(a,b){return this.each(function(d){a.split(/\s+/).forEach(function(a){d.addEventListener(a,b)})})},unbind:function(a,b){return this.each(function(d){a.split(/\s+/).forEach(function(a){d.removeEventListener(a,
b)})})},fire:function(a){return this.each(function(b){a.split(/\s+/).forEach(function(a){var c;h.createEvent?(c=h.createEvent("Events"),c.initEvent(a,!0,!0),b.dispatchEvent(c)):(c=h.createEventObject(),b.fireEvent("on"+event,c))})})}};"focus blur focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error animationstart animationend animationiteration touchstart touchend touchmove".split(" ").forEach(function(a){k.miniq.prototype[a]=
function(b){return b?this.bind(a,b):this.fire(a)}});return e}();