// miniq.js 0.4 - niko 2013
var $=function(){var e,n=0,k=window,l=k.document,m=function(a,b){if(a&&"value"in a){var c="c"==a.type[0],d="s"==a.type[0];if(void 0==b)return c?a.checked:a.value;c?a.checked=!!b:d?[].slice.call(a.options).forEach(function(c,d){c.value==b&&(a.selectedIndex=d)}):a.value=b}return null};k.miniq=function(a,b){var c=[],d,k;if(void 0!=a)for(d in"function"==typeof a?e.ready(a):"object"==typeof a?"length"in a?c=c.slice.call(a):c.push(a):"string"==typeof a&&(/^<.+>$/.test(a)?((k=l.createElement("div")).innerHTML=a,c=[].slice.call(k.childNodes)):void 0!=b?e(b).each(function(b){c=c.concat([].slice.call(b.querySelectorAll(a)))}):c=[].slice.call(l.querySelectorAll(a))),c)this[d]=c[d];this.list=c;Object.defineProperty(this,"length",{value:c.length,enumerable:!1,writable:!1});return this};e=function(a,b){return new miniq(a,b)};e.ready=function(a){if(/complete|loaded|interactive/.test(l.readyState))a();else e(l).on("DOMContentLoaded",a);return e};e.error=function(a){console.error(a)};e.extend=function(a){var b=
[].slice.call(arguments,1),c,d;if(void 0==a||"object"!=typeof a)a={};for(;c=b.shift();)for(d in c)a[d]=d in a&&"object"==typeof c[d]?e.extend(a[d],c[d]):c[d];return a};e.ajax=function(a,b){"string"==typeof a&&(a={url:a,ok:b});var c=a.type||"GET",d=a.url||"",r=a.contenttype||"application/x-www-form-urlencoded",s=a.datatype||"application/json",f=a.jsonp||new k.XMLHttpRequest,p=a.error||e.error,m=a.success||function(){},q,g,h;if(a.data){if("string"==typeof a.data)g=a.data;else if(/json/.test(r))g=JSON.stringify(a.data);
else{g=[];for(h in a.data)g.push(encodeURIComponent(h)+"="+encodeURIComponent(a.data[h]));g=g.join("&")}if(/GET|DEL/i.test(c)||a.jsonp)d+=/\?/.test(d)?"&"+g:"?"+g,g=""}if(a.jsonp)n&&e("#jsonp"+(n-1)).remove(),g=l.createElement("script"),h="jsonp"+n++,k[h]=m,g.onerror=p,g.src=/=\?/.test(d)?d.replace(/=\?/,"="+h):/\?/.test(d)?d+"&callback="+h:d+"?callback="+h,e("head").append(g);else{f.onreadystatechange=function(){if(4==f.readyState)if(q&&clearTimeout(q),/^2/.test(f.status)){g=f.responseText;if(/json/.test(s))try{g=
JSON.parse(f.responseText)}catch(b){return a.error("json parse error: "+b.message,f)}m(g,f)}else p(f.responseText,f)};f.open(c,d,!0);f.setRequestHeader("Content-Type",r);if(a.headers)for(h in a.headers)f.setRequestHeader(h,a.headers[h]);a.timeout&&(q=setTimeout(function(){f.onreadystatechange=function(){};f.abort();p("timeout",f)},1E3*a.timeout));f.send(g)}return f};k.miniq.prototype=e.fn={each:function(a){var b=this;b.list.forEach(function(c){a.call(b,c)});return b},filter:function(a){var b=this;
return e(b.list.filter(function(c){return a.call(b,c)}))},some:function(a){var b=this;b.list.some(function(c){return a.call(b,c)});return b},nth:function(a){0>a&&(a=this.length+a);return 0>a||a>=this.length?e():e(this.list[a])},append:function(a){return this.each(function(b){e(a).each(function(a){b.appendChild(a)})})},to:function(a){e(a).append(this.list);return this},remove:function(){return this.each(function(a){a.parentNode.removeChild(a)})},parent:function(){var a,b,c=[];for(a in this.list)(b=
this.list[a].parentNode)&&-1==c.indexOf(b)&&c.push(b);return e(c)},children:function(){var a,b=[];for(a in this.list)this.list[a].childNodes&&(b=b.concat([].slice.call(this.list[a].childNodes)));return e(b)},html:function(a){return void 0!=a?this.each(function(b){b.innerHTML=a}):this.length?this[0].innerHTML:null},text:function(a){return void 0!=a?this.each(function(b){b.innerText=a}):this.length?this[0].innerText:null},empty:function(){return this.html("")},val:function(a){return void 0==a?m(this[0]):
this.each(function(b){m(b,a)})},attr:function(a,b){if("object"==typeof a){for(var c in a)this.attr(c,a[c]);return this}if(!1===b)this.each(function(b){b.removeAttribute(a)});else if(void 0==b)return this.length?this[0].getAttribute(a):null;return this.each(function(c){c.setAttribute(a,b)})},clone:function(){var a=[];this.each(function(b){a.push(b.cloneNode(!0))});return e(a)},cls:function(a){if(void 0==a)return this.length?this[0].className:null;var b,c,d,e=/([\+\-\*])([^\+\-\*\s]+)/g;if(/^[\+\-\*]/.test(a))for(;null!==
(b=e.exec(a));)c=b[1],d=b[2],this.each(function(a){var b=a.className.split(/\s+/).filter(function(a){return a});"-"!=c&&-1==b.indexOf(d)?b.push(d):"+"!=c&&(b=b.filter(function(a){return a!=d}));a.className=b.join(" ")});else this.each(function(b){b.className=a});return this},has:function(a){var b=!1;this.some(function(c){return b=c.className.split(" ").some(function(b){return b==a})});return b},css:function(a,b){if(void 0==a)return this.length?this[0].style:null;if("object"==typeof a)this.each(function(b){for(var d in a)b.style[d]=
a[d]});else if("string"==typeof a){if(void 0==b)return this.length?this[0].style[a]:null;this.each(function(c){c.style[a]=b})}return this},show:function(){return this.css({display:null})},hide:function(){return this.css({display:"none"})},pos:function(a){a=a||0;return a in this?(a=(this[a]===l?l.body:this[a]).getBoundingClientRect(),{left:a.left+k.pageXOffset,top:a.top+k.pageYOffset,width:a.width,height:a.height}):null},width:function(a){return(this.pos(a)||{width:0}).width},height:function(a){return(this.pos(a)||
{height:0}).height},on:function(a,b){return this.each(function(c){a.split(/\s+/).forEach(function(a){c.addEventListener(a,b)})})},off:function(a,b){return this.each(function(c){a.split(/\s+/).forEach(function(a){c.removeEventListener(a,b)})})},fire:function(a){return this.each(function(b){a.split(/\s+/).forEach(function(a){var d;l.createEvent?(d=l.createEvent("Events"),d.initEvent(a,!0,!0),b.dispatchEvent(d)):(d=l.createEventObject(),b.fireEvent("on"+event,d))})})}};"focus blur focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error animationstart animationend animationiteration touchstart touchend touchmove orientationchange play pause timeupdate ended durationchange volumechange stalled".split(" ").forEach(function(a){e.fn[a]=
function(b){return b?this.on(a,b):this.fire(a)}});for(var t in e.fn)Object.defineProperty(e.fn,t,{enumerable:!1});return e}();